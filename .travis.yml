language: rust
sudo: false
addons:
  apt:
    packages:
    - libcurl4-openssl-dev
    - libelf-dev
    - libdw-dev
    - binutils-dev
  postgresql: 9.3
rust:
- nightly-2016-05-16
services:
- postgresql
env:
  global:
  - DATABASE_URL: postgres://postgres@localhost/nestedworld_tests
  - secure: JLClFkWJ7I2lizGBrr8wu6PxUQ5ttA5BUNtcMy43JhwVwjqCVglU/AjrioORn6kQUtjsO3Jj2eQU3Yfxql7eBd475uCPdyDXZlf+9OEKMDb4hdxcMkRwz2eIIzScOTf9SwsCeGlGcVvQb4HHBShj1FCJ5NAx55irgPIxeSr1ee6gX2f8JqIU0+iFzqT8ApEbW6Q4JkUsB19KY62odjBIDpyp60V1UT+PDazZzlLSgpaPIvJyNgw3e0Iz8x02qaZJaTbrXDK0eXBIecf+4gO3u1ECN8/skVQHgCH5QmBAnQ3kQBZ6f1ofIbpCwCoPtxbypv6YwMvlaLbL0CbdQzLI6KGgCv+Ly+JC9eyWEmdwCCKwS7wce7PQ+vVJVwKv7kdnuFEY1SOBHka+8NvDsCZTGsKhh2vJNhCTVg+9ngM1CfmVhtvOy5f0qjrNWHrRoi1wkmSDQ/YBmOmG8RS1ursFcQISo0ZTkScDsWH5+oRCNbSJkvvGB0wmyMQJnPtfvhPJcjZ/gbNOzvoa2LEEAGdfBho0TWHo8Yp+CB7XtsF7LWRB+m77u3wAj3FW2hqD+gPPsW7v/SndAQ29FjIUEuCqdw9ySRrWHqd4+moGwGhY8Sk9Jyni0s/y8p+1Nm/fT7JDlubs/UvajMcLaz8OAzxMgs/wP1FlnisvckwtAvn3lfc=
notifications:
  slack:
    secure: G1pGeor8Q87/v83eJ0K4JI9El3pH9BEIOucPwQqdGG91nGSOQKLqD/gk/N+3t8xCJbbTnp4Qwog6fgC33VS35dJsg/6IYXgC4UkmomIFD4oI2zHhlQbvUZuCJQcgQ0JYobfWgEhl5rVRLBgVHwJkwLqDaA90IkwNrqi4vaZHN5LGunZ/tp7vm4LBCJTAjxY6A7Ouw2IyqdwywdMas1OpVTWxM8nXpuWjgSAt6ZOvlcQVGGT3ajLqOWkKyJDbaj6qm3AtPNvyFcU5ZhRn+SjOXedLa+78fLUcJJLvAYLQsehMG9h8zCtwyq0E6WfO/exSPzLPx4ZwGrpcA5lQKK9qz5LOMEsyXMTiRq+ACIpD84t9/Wx5cK+Op9MgoEygKaiFYN2arGi7EgJvqUDbYxQHFJdV+nrGLJ0YWKjW5qCvTHQI5sg3AJToI+yzoVvOl6LOviVro5/BcqNJ1spVmFe/9KrU1vl9zmwN9MaKWGXcDtbXARObqHuCM4B85uPwjLczIvq5K1vtd/unudiSYOUX8C/B4giF7eC7J/3C+BLVTByHL54wJbTxCsTsMKwvm8uVxjvp9p1Vi0eW+Y7pMJC0EbWO0m9T759f8kvLY8vOLSQIkYEe0vZR5EwVMVLxzW9Tk38bfUvxi86DJPlBPRYx5b8h9UQYTvbqxe/lmVMe7zE=
before_script:
- |
  pip install 'travis-cargo<0.2' --user &&
  export PATH=$HOME/.local/bin:$PATH
- psql -c 'create database nestedworld_tests;' -U postgres
- psql -c 'create extension postgis;' -U postgres -d nestedworld_tests
script: make test
after_success:
- make travis
